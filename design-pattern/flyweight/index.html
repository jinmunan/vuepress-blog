<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>设计模式 - 结构型享元模式 | 钟楠のblog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="博客">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="Young Kbt个人博客, VuePress搭建, 学习Java、Web、框架、微服务、工具、前端等相关知识, 记录生活和技术路程。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d8879b32.css" as="style"><link rel="preload" href="/assets/js/app.1966069d.js" as="script"><link rel="preload" href="/assets/js/2.4e993f21.js" as="script"><link rel="preload" href="/assets/js/225.f6b84c16.js" as="script"><link rel="preload" href="/assets/js/8.6806e99f.js" as="script"><link rel="preload" href="/assets/js/4.82b67afb.js" as="script"><link rel="prefetch" href="/assets/js/10.144871a3.js"><link rel="prefetch" href="/assets/js/100.724ba6c4.js"><link rel="prefetch" href="/assets/js/101.5cc5332a.js"><link rel="prefetch" href="/assets/js/102.975f8a29.js"><link rel="prefetch" href="/assets/js/103.1b7a7faf.js"><link rel="prefetch" href="/assets/js/104.fd109fad.js"><link rel="prefetch" href="/assets/js/105.591f5371.js"><link rel="prefetch" href="/assets/js/106.30c679b9.js"><link rel="prefetch" href="/assets/js/107.56d604f7.js"><link rel="prefetch" href="/assets/js/108.ae517409.js"><link rel="prefetch" href="/assets/js/109.68defde0.js"><link rel="prefetch" href="/assets/js/11.00c275f1.js"><link rel="prefetch" href="/assets/js/110.2247da8b.js"><link rel="prefetch" href="/assets/js/111.95e7d01a.js"><link rel="prefetch" href="/assets/js/112.ad1346b8.js"><link rel="prefetch" href="/assets/js/113.b0a8c740.js"><link rel="prefetch" href="/assets/js/114.3ff48dd4.js"><link rel="prefetch" href="/assets/js/115.77271042.js"><link rel="prefetch" href="/assets/js/116.293c7452.js"><link rel="prefetch" href="/assets/js/117.5c26093c.js"><link rel="prefetch" href="/assets/js/118.e4ef68c1.js"><link rel="prefetch" href="/assets/js/119.2f76bb95.js"><link rel="prefetch" href="/assets/js/12.c63c0b57.js"><link rel="prefetch" href="/assets/js/120.d2604b29.js"><link rel="prefetch" href="/assets/js/121.5c9e1a2e.js"><link rel="prefetch" href="/assets/js/122.cd074669.js"><link rel="prefetch" href="/assets/js/123.c0c45d8f.js"><link rel="prefetch" href="/assets/js/124.48b3e5e0.js"><link rel="prefetch" href="/assets/js/125.e22ad117.js"><link rel="prefetch" href="/assets/js/126.c685ca16.js"><link rel="prefetch" href="/assets/js/127.2fb37be3.js"><link rel="prefetch" href="/assets/js/128.6ba5ebfa.js"><link rel="prefetch" href="/assets/js/129.2a8d908a.js"><link rel="prefetch" href="/assets/js/13.6ea0d730.js"><link rel="prefetch" href="/assets/js/130.dfc4fcc4.js"><link rel="prefetch" href="/assets/js/131.42808b6f.js"><link rel="prefetch" href="/assets/js/132.50a5138d.js"><link rel="prefetch" href="/assets/js/133.6d19f1c0.js"><link rel="prefetch" href="/assets/js/134.ea2d16bc.js"><link rel="prefetch" href="/assets/js/135.4242921e.js"><link rel="prefetch" href="/assets/js/136.3fff7dbd.js"><link rel="prefetch" href="/assets/js/137.81af29aa.js"><link rel="prefetch" href="/assets/js/138.949ba818.js"><link rel="prefetch" href="/assets/js/139.15ea8a9a.js"><link rel="prefetch" href="/assets/js/14.d4ef084b.js"><link rel="prefetch" href="/assets/js/140.da4a14c0.js"><link rel="prefetch" href="/assets/js/141.c2d57ba6.js"><link rel="prefetch" href="/assets/js/142.ff245f72.js"><link rel="prefetch" href="/assets/js/143.c3025254.js"><link rel="prefetch" href="/assets/js/144.b283c74b.js"><link rel="prefetch" href="/assets/js/145.d5c4c745.js"><link rel="prefetch" href="/assets/js/146.1a3efb66.js"><link rel="prefetch" href="/assets/js/147.2837590d.js"><link rel="prefetch" href="/assets/js/148.4e4c409f.js"><link rel="prefetch" href="/assets/js/149.f834eff0.js"><link rel="prefetch" href="/assets/js/15.4875dee2.js"><link rel="prefetch" href="/assets/js/150.eb1eff08.js"><link rel="prefetch" href="/assets/js/151.9616f278.js"><link rel="prefetch" href="/assets/js/152.c0432ee1.js"><link rel="prefetch" href="/assets/js/153.5add5d0a.js"><link rel="prefetch" href="/assets/js/154.ea007fc7.js"><link rel="prefetch" href="/assets/js/155.87ec8963.js"><link rel="prefetch" href="/assets/js/156.200e0d07.js"><link rel="prefetch" href="/assets/js/157.b3cb6969.js"><link rel="prefetch" href="/assets/js/158.da8e82f5.js"><link rel="prefetch" href="/assets/js/159.d9d4904a.js"><link rel="prefetch" href="/assets/js/16.250b7a76.js"><link rel="prefetch" href="/assets/js/160.7ea7497f.js"><link rel="prefetch" href="/assets/js/161.f17f4957.js"><link rel="prefetch" href="/assets/js/162.577ef013.js"><link rel="prefetch" href="/assets/js/163.f22fc3c6.js"><link rel="prefetch" href="/assets/js/164.6ede8b58.js"><link rel="prefetch" href="/assets/js/165.613b922b.js"><link rel="prefetch" href="/assets/js/166.f4262040.js"><link rel="prefetch" href="/assets/js/167.0639b8cb.js"><link rel="prefetch" href="/assets/js/168.a163b572.js"><link rel="prefetch" href="/assets/js/169.67ef1b10.js"><link rel="prefetch" href="/assets/js/17.9e755983.js"><link rel="prefetch" href="/assets/js/170.422dded9.js"><link rel="prefetch" href="/assets/js/171.5848a400.js"><link rel="prefetch" href="/assets/js/172.c49383f8.js"><link rel="prefetch" href="/assets/js/173.ecf0d885.js"><link rel="prefetch" href="/assets/js/174.e1ae3310.js"><link rel="prefetch" href="/assets/js/175.eb082808.js"><link rel="prefetch" href="/assets/js/176.889c60a0.js"><link rel="prefetch" href="/assets/js/177.aa8b45f4.js"><link rel="prefetch" href="/assets/js/178.f2d3e5d7.js"><link rel="prefetch" href="/assets/js/179.5e481cbf.js"><link rel="prefetch" href="/assets/js/18.d483263c.js"><link rel="prefetch" href="/assets/js/180.f27eda88.js"><link rel="prefetch" href="/assets/js/181.88c56889.js"><link rel="prefetch" href="/assets/js/182.f41c25ed.js"><link rel="prefetch" href="/assets/js/183.7d2f7fc3.js"><link rel="prefetch" href="/assets/js/184.34f17764.js"><link rel="prefetch" href="/assets/js/185.e5e52b6f.js"><link rel="prefetch" href="/assets/js/186.7e52cbbe.js"><link rel="prefetch" href="/assets/js/187.283d9b4e.js"><link rel="prefetch" href="/assets/js/188.84bd7ce9.js"><link rel="prefetch" href="/assets/js/189.bf3bb5f4.js"><link rel="prefetch" href="/assets/js/19.01c7cd54.js"><link rel="prefetch" href="/assets/js/190.2d3a87bb.js"><link rel="prefetch" href="/assets/js/191.f67e3bb8.js"><link rel="prefetch" href="/assets/js/192.e6e4c1e6.js"><link rel="prefetch" href="/assets/js/193.692932ca.js"><link rel="prefetch" href="/assets/js/194.7d86513a.js"><link rel="prefetch" href="/assets/js/195.25f0eaa6.js"><link rel="prefetch" href="/assets/js/196.8b115306.js"><link rel="prefetch" href="/assets/js/197.61a2a473.js"><link rel="prefetch" href="/assets/js/198.2530fc76.js"><link rel="prefetch" href="/assets/js/199.d60cf7a3.js"><link rel="prefetch" href="/assets/js/20.586f4d8f.js"><link rel="prefetch" href="/assets/js/200.9f117614.js"><link rel="prefetch" href="/assets/js/201.973b79ba.js"><link rel="prefetch" href="/assets/js/202.3f9d8fa2.js"><link rel="prefetch" href="/assets/js/203.bffcde7b.js"><link rel="prefetch" href="/assets/js/204.8ca8bcd3.js"><link rel="prefetch" href="/assets/js/205.e976ace0.js"><link rel="prefetch" href="/assets/js/206.aa9912d1.js"><link rel="prefetch" href="/assets/js/207.c0b91ceb.js"><link rel="prefetch" href="/assets/js/208.b5c9d35f.js"><link rel="prefetch" href="/assets/js/209.6cded3b5.js"><link rel="prefetch" href="/assets/js/21.f1c2bb39.js"><link rel="prefetch" href="/assets/js/210.ca46c8e7.js"><link rel="prefetch" href="/assets/js/211.ee099df9.js"><link rel="prefetch" href="/assets/js/212.2c66ed28.js"><link rel="prefetch" href="/assets/js/213.f2c75d1e.js"><link rel="prefetch" href="/assets/js/214.abaa1e6a.js"><link rel="prefetch" href="/assets/js/215.f1cb9c07.js"><link rel="prefetch" href="/assets/js/216.a6bb527b.js"><link rel="prefetch" href="/assets/js/217.cce596e6.js"><link rel="prefetch" href="/assets/js/218.c6cf29cd.js"><link rel="prefetch" href="/assets/js/219.e6c916b3.js"><link rel="prefetch" href="/assets/js/22.e95d3b81.js"><link rel="prefetch" href="/assets/js/220.55b65057.js"><link rel="prefetch" href="/assets/js/221.a4d92dc9.js"><link rel="prefetch" href="/assets/js/222.26bf0f27.js"><link rel="prefetch" href="/assets/js/223.d2fe2e10.js"><link rel="prefetch" href="/assets/js/224.acd0ad86.js"><link rel="prefetch" href="/assets/js/226.a6db958e.js"><link rel="prefetch" href="/assets/js/227.f3b20a31.js"><link rel="prefetch" href="/assets/js/228.ec55b981.js"><link rel="prefetch" href="/assets/js/229.9a57415b.js"><link rel="prefetch" href="/assets/js/23.3826dd87.js"><link rel="prefetch" href="/assets/js/230.7b659dad.js"><link rel="prefetch" href="/assets/js/231.cca4ed90.js"><link rel="prefetch" href="/assets/js/232.bbbe7276.js"><link rel="prefetch" href="/assets/js/233.0b2e0547.js"><link rel="prefetch" href="/assets/js/234.ecedb379.js"><link rel="prefetch" href="/assets/js/235.65385b26.js"><link rel="prefetch" href="/assets/js/236.35cbf52c.js"><link rel="prefetch" href="/assets/js/237.dd430354.js"><link rel="prefetch" href="/assets/js/238.46c4c79d.js"><link rel="prefetch" href="/assets/js/239.9b4fe1b1.js"><link rel="prefetch" href="/assets/js/24.739ca425.js"><link rel="prefetch" href="/assets/js/240.42a7515d.js"><link rel="prefetch" href="/assets/js/241.d36682d0.js"><link rel="prefetch" href="/assets/js/242.8424ac19.js"><link rel="prefetch" href="/assets/js/243.faf29091.js"><link rel="prefetch" href="/assets/js/244.bd707a59.js"><link rel="prefetch" href="/assets/js/245.820d7748.js"><link rel="prefetch" href="/assets/js/246.83b6273c.js"><link rel="prefetch" href="/assets/js/247.722642b5.js"><link rel="prefetch" href="/assets/js/248.1abda289.js"><link rel="prefetch" href="/assets/js/249.90ba900d.js"><link rel="prefetch" href="/assets/js/25.1751f73b.js"><link rel="prefetch" href="/assets/js/250.7f930bdf.js"><link rel="prefetch" href="/assets/js/251.0d7495d4.js"><link rel="prefetch" href="/assets/js/252.a4e234f8.js"><link rel="prefetch" href="/assets/js/253.f7ce4b0f.js"><link rel="prefetch" href="/assets/js/254.fa363409.js"><link rel="prefetch" href="/assets/js/255.5be0e1db.js"><link rel="prefetch" href="/assets/js/256.c3f2194f.js"><link rel="prefetch" href="/assets/js/257.1814ba23.js"><link rel="prefetch" href="/assets/js/258.9ec8ce4f.js"><link rel="prefetch" href="/assets/js/259.63ae3c23.js"><link rel="prefetch" href="/assets/js/26.4f087dde.js"><link rel="prefetch" href="/assets/js/260.e1a3cfc4.js"><link rel="prefetch" href="/assets/js/261.123e03ed.js"><link rel="prefetch" href="/assets/js/262.6c4102d8.js"><link rel="prefetch" href="/assets/js/263.bdb1a461.js"><link rel="prefetch" href="/assets/js/264.3b272c80.js"><link rel="prefetch" href="/assets/js/265.a02996a6.js"><link rel="prefetch" href="/assets/js/266.ddccb0bc.js"><link rel="prefetch" href="/assets/js/267.02abef2e.js"><link rel="prefetch" href="/assets/js/268.01c8e3e6.js"><link rel="prefetch" href="/assets/js/269.0e81c957.js"><link rel="prefetch" href="/assets/js/27.1429ebe6.js"><link rel="prefetch" href="/assets/js/270.bcf1143f.js"><link rel="prefetch" href="/assets/js/271.c6c157e2.js"><link rel="prefetch" href="/assets/js/272.46ebf64e.js"><link rel="prefetch" href="/assets/js/273.702d9345.js"><link rel="prefetch" href="/assets/js/274.46da8781.js"><link rel="prefetch" href="/assets/js/275.e4c3c0e8.js"><link rel="prefetch" href="/assets/js/276.e0961451.js"><link rel="prefetch" href="/assets/js/277.c491f774.js"><link rel="prefetch" href="/assets/js/278.bd6c2d7b.js"><link rel="prefetch" href="/assets/js/279.d7b9b5c2.js"><link rel="prefetch" href="/assets/js/28.28ad5ac1.js"><link rel="prefetch" href="/assets/js/280.c8be542f.js"><link rel="prefetch" href="/assets/js/281.56ae52d1.js"><link rel="prefetch" href="/assets/js/282.45fe33bf.js"><link rel="prefetch" href="/assets/js/283.81834a00.js"><link rel="prefetch" href="/assets/js/284.b85326e8.js"><link rel="prefetch" href="/assets/js/285.b298f115.js"><link rel="prefetch" href="/assets/js/286.5cd4dbd3.js"><link rel="prefetch" href="/assets/js/287.3564cc58.js"><link rel="prefetch" href="/assets/js/288.1dfb1d25.js"><link rel="prefetch" href="/assets/js/289.5474364d.js"><link rel="prefetch" href="/assets/js/29.98063773.js"><link rel="prefetch" href="/assets/js/290.77ed4d97.js"><link rel="prefetch" href="/assets/js/291.57554ac2.js"><link rel="prefetch" href="/assets/js/292.415e2b41.js"><link rel="prefetch" href="/assets/js/293.b90d0979.js"><link rel="prefetch" href="/assets/js/294.35b25655.js"><link rel="prefetch" href="/assets/js/295.7dca084c.js"><link rel="prefetch" href="/assets/js/296.4c749df9.js"><link rel="prefetch" href="/assets/js/297.6f2e6433.js"><link rel="prefetch" href="/assets/js/298.4e1eb686.js"><link rel="prefetch" href="/assets/js/299.42daaa6f.js"><link rel="prefetch" href="/assets/js/3.edb252fd.js"><link rel="prefetch" href="/assets/js/30.62977ebc.js"><link rel="prefetch" href="/assets/js/300.844ae57e.js"><link rel="prefetch" href="/assets/js/301.9db06725.js"><link rel="prefetch" href="/assets/js/302.145a1527.js"><link rel="prefetch" href="/assets/js/303.a0b2af08.js"><link rel="prefetch" href="/assets/js/304.6975b883.js"><link rel="prefetch" href="/assets/js/305.56e1c671.js"><link rel="prefetch" href="/assets/js/306.cea944a4.js"><link rel="prefetch" href="/assets/js/307.78e956cb.js"><link rel="prefetch" href="/assets/js/308.4588925c.js"><link rel="prefetch" href="/assets/js/309.8dd55f95.js"><link rel="prefetch" href="/assets/js/31.ed0c7a5c.js"><link rel="prefetch" href="/assets/js/310.8fac9af6.js"><link rel="prefetch" href="/assets/js/311.9ccd8338.js"><link rel="prefetch" href="/assets/js/312.25624977.js"><link rel="prefetch" href="/assets/js/313.3b30b6c8.js"><link rel="prefetch" href="/assets/js/314.916d2dc1.js"><link rel="prefetch" href="/assets/js/315.be95f7cb.js"><link rel="prefetch" href="/assets/js/316.7a15815e.js"><link rel="prefetch" href="/assets/js/317.6b59a852.js"><link rel="prefetch" href="/assets/js/318.97340267.js"><link rel="prefetch" href="/assets/js/319.e82ec0f0.js"><link rel="prefetch" href="/assets/js/32.714075a9.js"><link rel="prefetch" href="/assets/js/320.00860430.js"><link rel="prefetch" href="/assets/js/321.060ee39f.js"><link rel="prefetch" href="/assets/js/322.839d0dd7.js"><link rel="prefetch" href="/assets/js/323.0db6ea4d.js"><link rel="prefetch" href="/assets/js/324.f1f216e6.js"><link rel="prefetch" href="/assets/js/325.07bb0845.js"><link rel="prefetch" href="/assets/js/326.d66733d0.js"><link rel="prefetch" href="/assets/js/327.7a233017.js"><link rel="prefetch" href="/assets/js/328.87ee45fb.js"><link rel="prefetch" href="/assets/js/329.8c979643.js"><link rel="prefetch" href="/assets/js/33.62083d1f.js"><link rel="prefetch" href="/assets/js/330.1516ffa7.js"><link rel="prefetch" href="/assets/js/331.d6ab0cbe.js"><link rel="prefetch" href="/assets/js/332.72c0cd96.js"><link rel="prefetch" href="/assets/js/333.f0857232.js"><link rel="prefetch" href="/assets/js/334.4ae7b983.js"><link rel="prefetch" href="/assets/js/335.8481c0b5.js"><link rel="prefetch" href="/assets/js/336.2a2d4528.js"><link rel="prefetch" href="/assets/js/337.441f0adb.js"><link rel="prefetch" href="/assets/js/338.98e7dfd9.js"><link rel="prefetch" href="/assets/js/339.e5646ada.js"><link rel="prefetch" href="/assets/js/34.ddc60f1f.js"><link rel="prefetch" href="/assets/js/340.25a8281f.js"><link rel="prefetch" href="/assets/js/341.7e6edcf5.js"><link rel="prefetch" href="/assets/js/342.4ef1a6fd.js"><link rel="prefetch" href="/assets/js/343.7c839a41.js"><link rel="prefetch" href="/assets/js/344.08f24934.js"><link rel="prefetch" href="/assets/js/345.1a6ddfc2.js"><link rel="prefetch" href="/assets/js/346.d8db741e.js"><link rel="prefetch" href="/assets/js/347.ded24053.js"><link rel="prefetch" href="/assets/js/348.171c9c6b.js"><link rel="prefetch" href="/assets/js/349.83d6f668.js"><link rel="prefetch" href="/assets/js/35.1a67ad4b.js"><link rel="prefetch" href="/assets/js/350.3bbfb687.js"><link rel="prefetch" href="/assets/js/351.03b57713.js"><link rel="prefetch" href="/assets/js/352.8a1d7fbc.js"><link rel="prefetch" href="/assets/js/353.5f6296f5.js"><link rel="prefetch" href="/assets/js/354.5b5e6b59.js"><link rel="prefetch" href="/assets/js/355.56770830.js"><link rel="prefetch" href="/assets/js/356.8bd07c40.js"><link rel="prefetch" href="/assets/js/357.d2cc66b6.js"><link rel="prefetch" href="/assets/js/358.13ff4ee0.js"><link rel="prefetch" href="/assets/js/359.fcad62e1.js"><link rel="prefetch" href="/assets/js/36.02c15c7d.js"><link rel="prefetch" href="/assets/js/360.64a87b52.js"><link rel="prefetch" href="/assets/js/361.f33a6a06.js"><link rel="prefetch" href="/assets/js/362.d1ad0ad5.js"><link rel="prefetch" href="/assets/js/363.fe0666d2.js"><link rel="prefetch" href="/assets/js/364.fe1392b1.js"><link rel="prefetch" href="/assets/js/365.a6031310.js"><link rel="prefetch" href="/assets/js/366.9925a077.js"><link rel="prefetch" href="/assets/js/367.41898c5c.js"><link rel="prefetch" href="/assets/js/368.0ab32843.js"><link rel="prefetch" href="/assets/js/369.1b2bd658.js"><link rel="prefetch" href="/assets/js/37.e7e2f89b.js"><link rel="prefetch" href="/assets/js/370.e5feccde.js"><link rel="prefetch" href="/assets/js/371.0717f73e.js"><link rel="prefetch" href="/assets/js/372.3d270759.js"><link rel="prefetch" href="/assets/js/373.5ffbbcd7.js"><link rel="prefetch" href="/assets/js/374.8cdf3810.js"><link rel="prefetch" href="/assets/js/375.ce82d70f.js"><link rel="prefetch" href="/assets/js/376.597a10c2.js"><link rel="prefetch" href="/assets/js/377.47f37332.js"><link rel="prefetch" href="/assets/js/378.a46d3a0f.js"><link rel="prefetch" href="/assets/js/379.d43db53b.js"><link rel="prefetch" href="/assets/js/38.960e3529.js"><link rel="prefetch" href="/assets/js/380.e06f18a6.js"><link rel="prefetch" href="/assets/js/381.519303d2.js"><link rel="prefetch" href="/assets/js/382.2eb2eb0a.js"><link rel="prefetch" href="/assets/js/383.db45a698.js"><link rel="prefetch" href="/assets/js/39.35d7c52e.js"><link rel="prefetch" href="/assets/js/40.a35a3c62.js"><link rel="prefetch" href="/assets/js/41.74cf62a5.js"><link rel="prefetch" href="/assets/js/42.6f33b086.js"><link rel="prefetch" href="/assets/js/43.567e3661.js"><link rel="prefetch" href="/assets/js/44.d787523e.js"><link rel="prefetch" href="/assets/js/45.6fdb15d5.js"><link rel="prefetch" href="/assets/js/46.650f7cf0.js"><link rel="prefetch" href="/assets/js/47.c6d1bce7.js"><link rel="prefetch" href="/assets/js/48.9549fd27.js"><link rel="prefetch" href="/assets/js/49.29d7448b.js"><link rel="prefetch" href="/assets/js/5.40b0ecbd.js"><link rel="prefetch" href="/assets/js/50.3cbcb338.js"><link rel="prefetch" href="/assets/js/51.0aa8540a.js"><link rel="prefetch" href="/assets/js/52.0c62565f.js"><link rel="prefetch" href="/assets/js/53.8cab3179.js"><link rel="prefetch" href="/assets/js/54.7eef7bd7.js"><link rel="prefetch" href="/assets/js/55.83af7279.js"><link rel="prefetch" href="/assets/js/56.bfc6bc75.js"><link rel="prefetch" href="/assets/js/57.e5128113.js"><link rel="prefetch" href="/assets/js/58.e01f1ee1.js"><link rel="prefetch" href="/assets/js/59.44d8623e.js"><link rel="prefetch" href="/assets/js/6.1f7df56f.js"><link rel="prefetch" href="/assets/js/60.aefe0290.js"><link rel="prefetch" href="/assets/js/61.1b1c52cb.js"><link rel="prefetch" href="/assets/js/62.c7ab4cc5.js"><link rel="prefetch" href="/assets/js/63.e17a0ba6.js"><link rel="prefetch" href="/assets/js/64.13ebbbb2.js"><link rel="prefetch" href="/assets/js/65.dc125029.js"><link rel="prefetch" href="/assets/js/66.05d2f578.js"><link rel="prefetch" href="/assets/js/67.4c91e049.js"><link rel="prefetch" href="/assets/js/68.1361fc91.js"><link rel="prefetch" href="/assets/js/69.8ad4c043.js"><link rel="prefetch" href="/assets/js/7.07fe50de.js"><link rel="prefetch" href="/assets/js/70.66d34fe3.js"><link rel="prefetch" href="/assets/js/71.29d1ea04.js"><link rel="prefetch" href="/assets/js/72.2aa88c5f.js"><link rel="prefetch" href="/assets/js/73.a1b838d4.js"><link rel="prefetch" href="/assets/js/74.b7141cd6.js"><link rel="prefetch" href="/assets/js/75.110c3810.js"><link rel="prefetch" href="/assets/js/76.89fc5253.js"><link rel="prefetch" href="/assets/js/77.35bdc153.js"><link rel="prefetch" href="/assets/js/78.8bdb5b4e.js"><link rel="prefetch" href="/assets/js/79.fc6f36b0.js"><link rel="prefetch" href="/assets/js/80.5aa63da0.js"><link rel="prefetch" href="/assets/js/81.45733a28.js"><link rel="prefetch" href="/assets/js/82.5f542d18.js"><link rel="prefetch" href="/assets/js/83.d871f4ee.js"><link rel="prefetch" href="/assets/js/84.d811ecf1.js"><link rel="prefetch" href="/assets/js/85.91e66af5.js"><link rel="prefetch" href="/assets/js/86.8c23e887.js"><link rel="prefetch" href="/assets/js/87.29d7230d.js"><link rel="prefetch" href="/assets/js/88.7131036a.js"><link rel="prefetch" href="/assets/js/89.ec184e23.js"><link rel="prefetch" href="/assets/js/9.66308631.js"><link rel="prefetch" href="/assets/js/90.e21666d9.js"><link rel="prefetch" href="/assets/js/91.f040e838.js"><link rel="prefetch" href="/assets/js/92.b437af3f.js"><link rel="prefetch" href="/assets/js/93.6a19fa5f.js"><link rel="prefetch" href="/assets/js/94.32a07e2a.js"><link rel="prefetch" href="/assets/js/95.73be0926.js"><link rel="prefetch" href="/assets/js/96.5143558a.js"><link rel="prefetch" href="/assets/js/97.30155cd3.js"><link rel="prefetch" href="/assets/js/98.f7835d8e.js"><link rel="prefetch" href="/assets/js/99.46c8ef71.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d8879b32.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/logo.png" alt="钟楠のblog" class="logo"> <span class="site-name can-hide">钟楠のblog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="http://download.klrss.com/download/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下载站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/se/" class="nav-link">Java基础</a></li></ul></li><li class="dropdown-item"><h4>Java进阶(WEB)</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/" class="nav-link">Java进阶(WEB)</a></li></ul></li><li class="dropdown-item"><h4>JUC多线程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/juc/" class="nav-link">JUC多线程</a></li></ul></li><li class="dropdown-item"><h4>JVM虚拟机</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/jvm/" class="nav-link">JVM虚拟机</a></li></ul></li><li class="dropdown-item"><h4>JDK新特性</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/jdk/" class="nav-link">JDK新特性</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>关系型数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/oracle/" class="nav-link">Oracle</a></li></ul></li><li class="dropdown-item"><h4>非关系型数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/elasticsearch/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><a href="/devtools/" class="link-title">开发工具</a> <span class="title" style="display:none;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>项目管理工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>项目部署工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>服务器工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nginx/" class="nav-link">Nginx</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发框架" class="dropdown-title"><a href="/devframes/" class="link-title">开发框架</a> <span class="title" style="display:none;">开发框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mybatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/mybatis-plus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>Spring系列框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/springmvc/" class="nav-link">SpringMVC</a></li><li class="dropdown-subitem"><a href="/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-subitem"><a href="/springsecurity/" class="nav-link">SpringSecurity</a></li></ul></li><li class="dropdown-item"><h4>SpringCloud微服务系列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">注册中心</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务调用</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务降级</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务网关</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务配置</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务总栈</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件相关技术" class="dropdown-title"><a href="/middleware/" class="link-title">中间件相关技术</a> <span class="title" style="display:none;">中间件相关技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>消息中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/activemq/" class="nav-link">ActiveMQ</a></li><li class="dropdown-subitem"><a href="/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-subitem"><a href="/rocketmq/" class="nav-link">RocketMQ</a></li><li class="dropdown-subitem"><a href="/kafka/" class="nav-link">Kafka</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机相关知识" class="dropdown-title"><a href="/computer/" class="link-title">计算机相关知识</a> <span class="title" style="display:none;">计算机相关知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/" class="nav-link router-link-active">设计模式</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">css</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/jquery/" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/node/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/typescript/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于本站" class="dropdown-title"><a href="/archives/" class="link-title">关于本站</a> <span class="title" style="display:none;">关于本站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">收藏</a></li><li class="dropdown-subitem"><a href="/about/me/" class="nav-link">关于</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navigation/" class="nav-link">导航</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whells-use/" class="nav-link">轮子工具</a></li><li class="dropdown-item"><!----> <a href="/project/" class="nav-link">项目工程</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/jinmunan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.staticaly.com/gh/jinmunan/imgs@master/imgs/user/avatar.png"> <div class="blogger-info"><h3>钟楠</h3> <span>胡桃率先出击</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="http://download.klrss.com/download/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下载站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/se/" class="nav-link">Java基础</a></li></ul></li><li class="dropdown-item"><h4>Java进阶(WEB)</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/" class="nav-link">Java进阶(WEB)</a></li></ul></li><li class="dropdown-item"><h4>JUC多线程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/juc/" class="nav-link">JUC多线程</a></li></ul></li><li class="dropdown-item"><h4>JVM虚拟机</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/jvm/" class="nav-link">JVM虚拟机</a></li></ul></li><li class="dropdown-item"><h4>JDK新特性</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/jdk/" class="nav-link">JDK新特性</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>关系型数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/oracle/" class="nav-link">Oracle</a></li></ul></li><li class="dropdown-item"><h4>非关系型数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/elasticsearch/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><a href="/devtools/" class="link-title">开发工具</a> <span class="title" style="display:none;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>项目管理工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>项目部署工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>服务器工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nginx/" class="nav-link">Nginx</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发框架" class="dropdown-title"><a href="/devframes/" class="link-title">开发框架</a> <span class="title" style="display:none;">开发框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mybatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/mybatis-plus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>Spring系列框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/springmvc/" class="nav-link">SpringMVC</a></li><li class="dropdown-subitem"><a href="/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-subitem"><a href="/springsecurity/" class="nav-link">SpringSecurity</a></li></ul></li><li class="dropdown-item"><h4>SpringCloud微服务系列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">注册中心</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务调用</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务降级</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务网关</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务配置</a></li><li class="dropdown-subitem"><a href="/design-pattern/flyweight/404" class="nav-link">服务总栈</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件相关技术" class="dropdown-title"><a href="/middleware/" class="link-title">中间件相关技术</a> <span class="title" style="display:none;">中间件相关技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>消息中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/activemq/" class="nav-link">ActiveMQ</a></li><li class="dropdown-subitem"><a href="/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-subitem"><a href="/rocketmq/" class="nav-link">RocketMQ</a></li><li class="dropdown-subitem"><a href="/kafka/" class="nav-link">Kafka</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机相关知识" class="dropdown-title"><a href="/computer/" class="link-title">计算机相关知识</a> <span class="title" style="display:none;">计算机相关知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/" class="nav-link router-link-active">设计模式</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">css</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/jquery/" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/node/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/typescript/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于本站" class="dropdown-title"><a href="/archives/" class="link-title">关于本站</a> <span class="title" style="display:none;">关于本站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">收藏</a></li><li class="dropdown-subitem"><a href="/about/me/" class="nav-link">关于</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/navigation/" class="nav-link">导航</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whells-use/" class="nav-link">轮子工具</a></li><li class="dropdown-item"><!----> <a href="/project/" class="nav-link">项目工程</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/jinmunan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>设计模式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-pattern/thought/" class="sidebar-link">设计模式 - 设计思想</a></li><li><a href="/design-pattern/seven-principles/" class="sidebar-link">设计模式 - 七大原则认识</a></li><li><a href="/design-pattern/uml-class-diagram/" class="sidebar-link">设计模式 - UML类图</a></li><li><a href="/design-pattern/summary/" class="sidebar-link">设计模式 - 设计模式概述</a></li><li><a href="/design-pattern/single/" class="sidebar-link">设计模式 -  创建型单例模式</a></li><li><a href="/design-pattern/factory/" class="sidebar-link">设计模式 - 创建型工厂模式</a></li><li><a href="/design-pattern/prototype/" class="sidebar-link">设计模式 - 创建型原型模式</a></li><li><a href="/design-pattern/builder/" class="sidebar-link">设计模式 - 创建型建造者模式</a></li><li><a href="/design-pattern/adapter/" class="sidebar-link">设计模式 - 结构型适配器模式</a></li><li><a href="/design-pattern/bridge/" class="sidebar-link">设计模式 - 结构型桥接模式</a></li><li><a href="/design-pattern/decorator/" class="sidebar-link">设计模式 - 结构型装饰者模式</a></li><li><a href="/design-pattern/composite/" class="sidebar-link">设计模式 - 结构型组合模式</a></li><li><a href="/design-pattern/facade/" class="sidebar-link">设计模式 - 结构型外观模式</a></li><li><a href="/design-pattern/flyweight/" aria-current="page" class="active sidebar-link">设计模式 - 结构型享元模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/design-pattern/flyweight/#享元模式基本介绍" class="sidebar-link">享元模式基本介绍</a></li><li class="sidebar-sub-header level2"><a href="/design-pattern/flyweight/#享元模式的结构与实现" class="sidebar-link">享元模式的结构与实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/design-pattern/flyweight/#内部状态和外部状态" class="sidebar-link">内部状态和外部状态</a></li><li class="sidebar-sub-header level3"><a href="/design-pattern/flyweight/#模式的结构" class="sidebar-link">模式的结构</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/design-pattern/flyweight/#展示网站项目需求" class="sidebar-link">展示网站项目需求</a></li><li class="sidebar-sub-header level2"><a href="/design-pattern/flyweight/#传统方案解决网站展现项目" class="sidebar-link">传统方案解决网站展现项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/design-pattern/flyweight/#问题分析" class="sidebar-link">问题分析</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/design-pattern/flyweight/#享元模式解决网站展现项目" class="sidebar-link">享元模式解决网站展现项目</a></li><li class="sidebar-sub-header level2"><a href="/design-pattern/flyweight/#jdk-integer-的享元模式剖析" class="sidebar-link">JDK-Integer 的享元模式剖析</a></li><li class="sidebar-sub-header level2"><a href="/design-pattern/flyweight/#享元模式的注意事项和细节" class="sidebar-link">享元模式的注意事项和细节</a></li><li class="sidebar-sub-header level2"><a href="/design-pattern/flyweight/#享元模式的应用场景" class="sidebar-link">享元模式的应用场景</a></li></ul></li><li><a href="/design-pattern/proxy/" class="sidebar-link">设计模式 - 结构型代理模式</a></li><li><a href="/design-pattern/template-method/" class="sidebar-link">设计模式 - 行为型模板方法模式</a></li><li><a href="/design-pattern/command/" class="sidebar-link">设计模式 - 行为型命令模式</a></li><li><a href="/design-pattern/visitor/" class="sidebar-link">设计模式 - 行为型访问者模式</a></li><li><a href="/design-pattern/iterator/" class="sidebar-link">设计模式 - 行为型迭代器模式</a></li><li><a href="/design-pattern/observer/" class="sidebar-link">设计模式 - 行为型观察者模式</a></li><li><a href="/design-pattern/mediator/" class="sidebar-link">设计模式 - 行为型中介模式</a></li><li><a href="/design-pattern/memento/" class="sidebar-link">设计模式 - 行为型备忘录模式</a></li><li><a href="/design-pattern/interpreter/" class="sidebar-link">设计模式 - 行为型解释器模式</a></li><li><a href="/design-pattern/state/" class="sidebar-link">设计模式 - 行为型状态模式</a></li><li><a href="/design-pattern/strategy/" class="sidebar-link">设计模式 - 行为型策略模式</a></li><li><a href="/design-pattern/responsibility/" class="sidebar-link">设计模式 - 行为型职责链模式</a></li><li><a href="/design-pattern/end/" class="sidebar-link">设计模式 - 设计模式总结</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86" title="分类" data-v-06225672>计算机相关知识</a></li><li data-v-06225672><a href="/categories/?category=%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="分类" data-v-06225672>设计模式</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://docs.klrss.com/" target="_blank" title="作者" class="beLink" data-v-06225672>钟楠の</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-03-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">设计模式 - 结构型享元模式<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#享元模式基本介绍">享元模式基本介绍</a></li><li><a href="#享元模式的结构与实现">享元模式的结构与实现</a><ul><li><a href="#内部状态和外部状态">内部状态和外部状态</a></li><li><a href="#模式的结构">模式的结构</a></li></ul></li><li><a href="#展示网站项目需求">展示网站项目需求</a></li><li><a href="#传统方案解决网站展现项目">传统方案解决网站展现项目</a><ul><li><a href="#问题分析">问题分析</a></li></ul></li><li><a href="#享元模式解决网站展现项目">享元模式解决网站展现项目</a></li><li><a href="#jdk-integer-的享元模式剖析">JDK-Integer 的享元模式剖析</a></li><li><a href="#享元模式的注意事项和细节">享元模式的注意事项和细节</a></li><li><a href="#享元模式的应用场景">享元模式的应用场景</a></li></ul></div><p></p> <h2 id="享元模式基本介绍"><a href="#享元模式基本介绍" class="header-anchor">#</a> 享元模式基本介绍</h2> <p>在面向对象程序设计过程中，有时会面临要创建大量相同或相似对象实例的问题。创建那么多的对象将会耗费很多的系统资源，它是系统性能提高的一个瓶颈。</p> <p>例如，围棋和五子棋中的黑白棋子，图像中的坐标点或颜色，局域网中的路由器、交换机和集线器，教室里的桌子和凳子等。这些对象有很多相似的地方，如果能把它们相同的部分提取出来共享，则能节省大量的系统资源，这就是享元模式的产生背景。</p> <p><strong>享元模式</strong>（Flyweight Pattern） 也叫 <strong>蝇量模式</strong>: 运用共享技术有效地支持大量细粒度的对象。</p> <p>常用于系统底层开发，解决系统的性能问题。像数据库连接池，里面都是创建好的连接对象，在这些连接对象中有我们需要的则直接拿来用，避免重新创建，如果没有我们需要的，则创建一个。</p> <p>享元模式能够解决重复对象的内存浪费的问题，当系统中有大量相似对象，需要缓冲池时。不需总是创建新对象，可以从缓冲池里拿。这样可以降低系统内存，同时提高效率。</p> <p>享元模式经典的应用场景就是池技术了，String 常量池、数据库连接池、缓冲池等等都是享元模式的应用，享元模式是池技术的重要实现方式。</p> <blockquote><p>主要优点</p></blockquote> <p>相同对象只要保存一份，这降低了系统中对象的数量，从而降低了系统中细粒度对象给内存带来的压力。</p> <blockquote><p>主要缺点</p></blockquote> <ul><li>为了使对象可以共享，需要将一些不能共享的状态外部化，这将增加程序的复杂性。</li> <li>读取享元模式的外部状态会使得运行时间稍微变长</li></ul> <h2 id="享元模式的结构与实现"><a href="#享元模式的结构与实现" class="header-anchor">#</a> 享元模式的结构与实现</h2> <h3 id="内部状态和外部状态"><a href="#内部状态和外部状态" class="header-anchor">#</a> 内部状态和外部状态</h3> <p>比如围棋、五子棋、跳棋，它们都有大量的棋子对象，围棋和五子棋只有黑白两色，跳棋颜色多一点，所以棋子颜色就是棋子的内部状态；而各个棋子之间的差别就是位置的不同，当我们落子后，落子颜色是定的，但位置是变化的，所以棋子坐标就是棋子的外部状态。</p> <p>享元模式的定义提出了两个要求，细粒度和共享对象。因为要求细粒度，所以不可避免地会使对象数量多且性质相近，此时我们就将这些对象的信息分为两个部分：内部状态和外部状态。</p> <ul><li><p>内部状态指对象共享出来的信息，存储在享元信息内部，并且不会随环境的改变而改变</p></li> <li><p>外部状态指对象得以依赖的一个标记，随环境的改变而改变，不可共享
比如，连接池中的连接对象，保存在连接对象中的用户名、密码、连接 URL 等信息，在创建对象的时候就设置好了，不会随环境的改变而改变，这些为内部状态。而当每个连接要被回收利用时，我们需要将它标记为可用状态，这些为外部状态</p></li></ul> <p>举个例子：围棋理论上有 361 个空位可以放棋子，每盘棋都有可能有两三百个棋子对象产生，因为内存空间有限，一台服务器很难支持更多的玩家玩围棋游戏，如果用享元模式来处理棋子，那么棋子对象就可以减少到只有两个实例，这样就很好的解决了对象的开销问题。</p> <p>享元模式的本质是缓存共享对象，降低内存消耗。</p> <h3 id="模式的结构"><a href="#模式的结构" class="header-anchor">#</a> 模式的结构</h3> <p>享元模式的主要角色有如下：</p> <ul><li>抽象享元角色（Flyweight）：是所有的具体享元类的基类，为具体享元规范需要实现的公共接口，非享元的外部状态以参数的形式通过方法传入</li> <li>具体享元（Concrete Flyweight）角色：实现抽象享元角色中所规定的接口</li> <li>非享元（Unsharable Flyweight)角色：是不可以共享的外部状态，它以参数的形式注入具体享元的相关方法中</li> <li>享元工厂（Flyweight Factory）角色：负责创建和管理享元角色。当客户对象请求一个享元对象时，享元工厂检査系统中是否存在符合要求的享元对象，如果存在则提供给客户；如果不存在的话，则创建一个新的享元对象</li></ul> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/design-pattern/20220316213417.png" alt="image-20220314190648003"></p> <p>下面享元模式的结构图，其中：</p> <ul><li>UnsharedConcreteFlyweight 是非享元角色，里面包含了非共享的外部状态信息 info</li> <li>Flyweight 是抽象享元角色，里面包含了享元方法 operation(UnsharedConcreteFlyweight state)，非享元的外部状态以参数的形式通过该方法传入</li> <li>ConcreteFlyweight 是具体享元角色，包含了关键字 key，它实现了抽象享元接口</li> <li>FlyweightFactory 是享元工厂角色，它是关键字 key 来管理具体享元</li> <li>客户角色通过享元工厂获取具体享元，并访问具体享元的相关方法</li></ul> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/design-pattern/20220316213419.png" alt="image-20220314190636066"></p> <p>代码实现：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 抽象享元角色</span>
<span class="token keyword">interface</span> <span class="token class-name">Flyweight</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token class-name">UnsharedConcreteFlyweight</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 具体享元角色</span>
<span class="token keyword">class</span> <span class="token class-name">ConcreteFlyweight</span> <span class="token keyword">implements</span> <span class="token class-name">Flyweight</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> key<span class="token punctuation">;</span>
    <span class="token class-name">ConcreteFlyweight</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;具体享元&quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot;被创建！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token class-name">UnsharedConcreteFlyweight</span> outState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;具体享元&quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot;被调用，&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;非享元信息是:&quot;</span> <span class="token operator">+</span> outState<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 非享元角色</span>
<span class="token keyword">class</span> <span class="token class-name">UnsharedConcreteFlyweight</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> info<span class="token punctuation">;</span>
    <span class="token class-name">UnsharedConcreteFlyweight</span><span class="token punctuation">(</span><span class="token class-name">String</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> info<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> info<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> info<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 享元工厂角色</span>
<span class="token keyword">class</span> <span class="token class-name">FlyweightFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Flyweight</span><span class="token punctuation">&gt;</span></span> flyweights <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Flyweight</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Flyweight</span> <span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Flyweight</span> flyweight <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Flyweight</span><span class="token punctuation">)</span> flyweights<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flyweight <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;具体享元&quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot;已经存在，被成功获取！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            flyweight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteFlyweight</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            flyweights<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> flyweight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> flyweight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FlyweightPattern</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FlyweightFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FlyweightFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Flyweight</span> f01 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始 a 不存在，则创建 a</span>
        <span class="token class-name">Flyweight</span> f02 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取第一次创建的 a</span>
        <span class="token class-name">Flyweight</span> f03 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取第一次创建的 a</span>
        <span class="token class-name">Flyweight</span> f11 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始 b 不存在，则创建 b</span>
        <span class="token class-name">Flyweight</span> f12 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取第一次创建的 b</span>
        f01<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UnsharedConcreteFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;第1次调用a。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        f02<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UnsharedConcreteFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;第2次调用a。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        f03<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UnsharedConcreteFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;第3次调用a。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        f11<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UnsharedConcreteFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;第1次调用b。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        f12<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UnsharedConcreteFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;第2次调用b。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h2 id="展示网站项目需求"><a href="#展示网站项目需求" class="header-anchor">#</a> 展示网站项目需求</h2> <p>小型的外包项目，给客户 A 做一个产品展示网站，客户 A 的朋友感觉效果不错，也希望做这样的产品展示网站，但是要求都有些不同：</p> <ul><li>有客户要求以新闻的形式发布</li> <li>有客户人要求以博客的形式发布</li> <li>有客户希望以微信公众号的形式发布</li></ul> <h2 id="传统方案解决网站展现项目"><a href="#传统方案解决网站展现项目" class="header-anchor">#</a> 传统方案解决网站展现项目</h2> <p>给每个网站租用一个空间。</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/design-pattern/20220316213422.png" alt="image-20220314190248901"></p> <h3 id="问题分析"><a href="#问题分析" class="header-anchor">#</a> 问题分析</h3> <p>需要的网站结构相似度很高，而且都不是高访问量网站，如果分成多个虚拟空间来处理，相当于一个相同网站的实例对象很多，造成服务器的资源浪费。</p> <p>解决思路：整合到一个网站中，共享其相关的代码和数据，对于硬盘、内存、CPU、数据库空间等服务器资源 都可以达成共享，减少服务器资源。</p> <p>对于代码来说，由于是一份实例，维护和扩展都更加容易。</p> <p>上面的解决思路就可以使用 <strong>享元模式</strong>。</p> <h2 id="享元模式解决网站展现项目"><a href="#享元模式解决网站展现项目" class="header-anchor">#</a> 享元模式解决网站展现项目</h2> <p>类图：</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/design-pattern/20220316213425.png" alt="image-20220314190856461"></p> <p>代码实现：</p> <p>User 类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
	
	<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
	
	<span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>网站类和其子类</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">WebSite</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 抽象方法</span>
<span class="token punctuation">}</span>

<span class="token comment">// 具体网站</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteWebSite</span> <span class="token keyword">extends</span> <span class="token class-name">WebSite</span> <span class="token punctuation">{</span>

	<span class="token comment">// 共享的部分，内部状态</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> type <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 网站发布的形式（类型）</span>

	<span class="token comment">// 构造器</span>
	<span class="token keyword">public</span> <span class="token class-name">ConcreteWebSite</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;网站的发布形式为:&quot;</span> <span class="token operator">+</span> type <span class="token operator">+</span> <span class="token string">&quot; 在使用中 .. 使用者是&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>网站工厂类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 网站工厂类，根据需要返回压一个网站</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSiteFactory</span> <span class="token punctuation">{</span>
    <span class="token comment">// 集合，充当池的作用</span>
    <span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">ConcreteWebSite</span><span class="token punctuation">&gt;</span></span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 根据网站的类型，返回一个网站, 如果没有就创建一个网站，并放入到池中,并返回</span>
    <span class="token keyword">public</span> <span class="token class-name">WebSite</span> <span class="token function">getWebSiteCategory</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>pool<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 就创建一个网站，并放入到池中</span>
            pool<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteWebSite</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">WebSite</span><span class="token punctuation">)</span>pool<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取网站分类的总数 (池中有多少个网站类型)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getWebSiteCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> pool<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>测试类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个工厂类</span>
        <span class="token class-name">WebSiteFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSiteFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 客户要一个以新闻形式发布的网站</span>
        <span class="token class-name">WebSite</span> webSite1 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getWebSiteCategory</span><span class="token punctuation">(</span><span class="token string">&quot;新闻&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        webSite1<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 客户要一个以博客形式发布的网站</span>
        <span class="token class-name">WebSite</span> webSite2 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getWebSiteCategory</span><span class="token punctuation">(</span><span class="token string">&quot;博客&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        webSite2<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 客户要一个以博客形式发布的网站</span>
        <span class="token class-name">WebSite</span> webSite3 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getWebSiteCategory</span><span class="token punctuation">(</span><span class="token string">&quot;博客&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        webSite3<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;smith&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 客户要一个以博客形式发布的网站</span>
        <span class="token class-name">WebSite</span> webSite4 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getWebSiteCategory</span><span class="token punctuation">(</span><span class="token string">&quot;博客&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        webSite4<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;king&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;网站的分类共=&quot;</span> <span class="token operator">+</span> factory<span class="token punctuation">.</span><span class="token function">getWebSiteCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="jdk-integer-的享元模式剖析"><a href="#jdk-integer-的享元模式剖析" class="header-anchor">#</a> JDK-Integer 的享元模式剖析</h2> <p>JDK 中 Integer 使用到了享元模式。</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/design-pattern/20220316213452.png" alt="image-20220314191251956"></p> <p>代码说明：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FlyWeight</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果 Integer.valueOf(x) x 在 -128 --- 127 直接，就是使用享元模式返回，如果不在</span>
        <span class="token comment">// 范围类，则仍然 new</span>
        <span class="token comment">// 小结:</span>
        <span class="token comment">// 1. 在 valueOf 方法中，先判断值是否在 IntegerCache 中，如果不在，就创建新的 Integer(new), 否则，就直接从缓存池返回</span>
        <span class="token comment">// 2. valueOf 方法，就使用到享元模式</span>
        <span class="token comment">// 3. 如果使用 valueOf 方法得到一个 Integer 实例，范围在 -128 - 127 ，执行速度比 new 快</span>
        <span class="token class-name">Integer</span> x <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 得到 x 实例，类型 Integer</span>
        <span class="token class-name">Integer</span> y <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 得到 y 实例，类型 Integer</span>
        <span class="token class-name">Integer</span> z <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// .. Integer w = new Integer(127);</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 大小，true</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x <span class="token operator">==</span> z <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>w <span class="token operator">==</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>w <span class="token operator">==</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
        <span class="token class-name">Integer</span> x1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> x2 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;x1==x2&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x1 <span class="token operator">==</span> x2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false，因为超出f</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="享元模式的注意事项和细节"><a href="#享元模式的注意事项和细节" class="header-anchor">#</a> 享元模式的注意事项和细节</h2> <ul><li>在享元模式这样理解，「享」就表示共享，「元」表示对象</li> <li>系统中有大量对象，这些对象消耗大量内存，并且对象的状态大部分可以外部化时，我们就可以考虑选用享元模式</li> <li>用唯一标识码判断，如果在内存中有，则返回这个唯一标识码所标识的对象，用 <code>HashMap/HashTable</code> 存储</li> <li>享元模式大大减少了对象的创建，降低了程序内存的占用，提高效率</li> <li>享元模式提高了系统的复杂度。需要分离出内部状态和外部状态，而外部状态具有固化特性，不应该随着内部状态的改变而改变，这是我们使用享元模式需要注意的地方</li> <li>使用享元模式时，注意划分内部状态和外部状态，并且需要有一个工厂类加以控制</li> <li>享元模式经典的应用场景是需要缓冲池的场景，比如 String 常量池、数据库连接池</li></ul> <h2 id="享元模式的应用场景"><a href="#享元模式的应用场景" class="header-anchor">#</a> 享元模式的应用场景</h2> <p>当系统中多处需要同一组信息时，可以把这些信息封装到一个对象中，然后对该对象进行缓存，这样，一个对象就可以提供给多出需要使用的地方，避免大量同一对象的多次创建，降低大量内存空间的消耗。</p> <p>享元模式其实是 <a href="https://notes.youngkbt.cn/design-pattern/factory/#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95-factory-method" target="_blank" rel="noopener noreferrer">工厂方法模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的一个改进机制，享元模式同样要求创建一个或一组对象，并且就是通过工厂方法模式生成对象的，只不过享元模式为工厂方法模式增加了缓存这一功能。</p> <p>前面分析了享元模式的结构与特点，下面分析它适用的应用场景。享元模式是通过减少内存中对象的数量来节省内存空间的，所以以下几种情形适合采用享元模式：</p> <ol><li>系统中存在大量相同或相似的对象，这些对象耗费大量的内存资源</li> <li>大部分的对象可以按照内部状态进行分组，且可将不同部分外部化，这样每一个组只需保存一个内部状态</li> <li>由于享元模式需要额外维护一个保存享元的数据结构，所以应当在有足够多的享元实例时才值得使用享元模式</li></ol></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/jinmunan/edit/master/docs/06.计算机相关知识/01.设计模式/27.设计模式 - 结构型享元模式.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="标签">#设计模式</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/design-pattern/facade/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">设计模式 - 结构型外观模式</div></a> <a href="/design-pattern/proxy/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">设计模式 - 结构型代理模式</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/design-pattern/facade/" class="prev">设计模式 - 结构型外观模式</a></span> <span class="next"><a href="/design-pattern/proxy/">设计模式 - 结构型代理模式</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/MySQL/3/"><div>
            MySQL进阶篇
            <!----></div></a> <span class="date">01-10</span></dt></dl><dl><dd>02</dd> <dt><a href="/MySQL/2/"><div>
            MySQL高级篇
            <!----></div></a> <span class="date">01-10</span></dt></dl><dl><dd>03</dd> <dt><a href="/MySQL/1/"><div>
            MySQL基础篇
            <!----></div></a> <span class="date">01-10</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/jinmunan" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/jinmunan" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://www.klrss.com" title="网站首页" target="_blank" class="iconfont icon-rss"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>钟楠の | blog</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div><div></div><!----></div></div>
    <script src="/assets/js/app.1966069d.js" defer></script><script src="/assets/js/2.4e993f21.js" defer></script><script src="/assets/js/225.f6b84c16.js" defer></script><script src="/assets/js/8.6806e99f.js" defer></script><script src="/assets/js/4.82b67afb.js" defer></script>
  </body>
</html>
